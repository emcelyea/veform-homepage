<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Veform - Documentation</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito+Sans:ital,opsz,wght@0,6..12,200..1000;1,6..12,200..1000&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/default.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
    <style>
      :root {
        --primary: rgb(85, 246, 245);
        --primary-dark: rgb(55, 186, 200);
        --secondary: rgb(24, 140, 190);
        --dark: #000000;
        --dark-light: #1a1a1a;
        --gray: #a0a0a0;
        --white: #ffffff;
        --sidebar-width: 240px;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Nunito Sans", -apple-system, BlinkMacSystemFont,
          sans-serif;
        line-height: 1.6;
        color: var(--white);
        background: var(--dark);
      }

      /* Sidebar */
      .sidebar {
        position: fixed;
        left: 0;
        top: 0;
        width: var(--sidebar-width);
        height: 100vh;
        background: var(--dark-light);
        border-right: 1px solid rgba(255, 255, 255, 0.08);
        padding: 2rem 0;
        display: flex;
        flex-direction: column;
      }

      .sidebar-logo {
        font-size: 1.4rem;
        font-weight: 200;
        padding: 0 1.5rem 2rem;
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-decoration: none;
      }

      .sidebar-nav {
        list-style: none;
        flex: 1;
      }

      .sidebar-nav a {
        display: block;
        padding: 0.75rem 1.5rem;
        color: var(--gray);
        text-decoration: none;
        font-weight: 500;
        font-size: 0.95rem;
        transition: all 0.2s;
        border-left: 3px solid transparent;
      }

      .sidebar-nav a:hover {
        color: var(--white);
        background: rgba(255, 255, 255, 0.03);
      }

      .sidebar-nav .active .nav-header {
        color: var(--primary);
        border-left-color: var(--primary);
        background: rgba(85, 246, 245, 0.05);
      }
      .sidebar-nav .sub-nav a {
        padding: 0.25rem 2.5rem;
      }
      .sidebar-nav .sub-nav li:first-child {
        margin-top: -0.25rem;
        padding-top: 0rem;
      }

      /* Main Content */
      .main {
        margin-left: var(--sidebar-width);
        min-height: 100vh;
        padding: 2rem 4rem 3rem;
        max-width: 1400px;
      }

      .main h1 {
        font-size: 2.2rem;
        font-weight: 700;
        margin-bottom: 1rem;
        color: var(--white);
      }

      .section {
        display: none;
      }

      .section.active {
        display: block;
      }

      .section h2 {
        font-size: 1.5rem;
        font-weight: 600;
        margin-bottom: 1rem;
        color: var(--white);
        border-bottom: 1px solid rgba(255, 255, 255, 0.06);
      }

      .section-content {
        padding-top: 1rem;
      }
      .section-content p {
        font-size: 1rem;
        font-weight: 400;
        color: var(--white);
      }
      .section-content h2 {
        font-size: 1.45rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
        padding-top: 0.5rem;
        color: var(--white);
      }
      .subsection {
        padding-top: 0.5rem;
        margin-top: 1rem;
        margin-bottom: 4rem;
      }
      .reference-section {
        display: grid;
        grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
        gap: 1rem;
        border-bottom: 1px solid rgba(255, 255, 255, 0.18);
        margin-top: 3.5rem;
        padding-bottom: 0.75rem;
      }
      .reference-section p {
        font-size: 1rem;
      }
      .reference-section a {
        color: rgba(255, 255, 255, 0.7);
        text-decoration: none;
        transition: color 0.3s;
      }
      .reference-section a:hover {
        color: var(--white);
      }
      .reference-language {
        font-size: 1rem;
        background: rgba(25, 25, 25, 0.75);
        color: #ddd;
        border-radius: 8px;
        padding: 4px 8px;
        border: none;
        outline: none;
        margin-bottom: 1rem;
      }
      .reference-section div {
        position: relative;
      }
      .reference-section code {
        background: rgba(25, 25, 25, 0.75);
        color: #ddd;
        border-radius: 8px;
      }
      .subsection code {
        background: rgba(25, 25, 25, 0.75);
        color: #ddd;
        border-radius: 8px;
      }
      .reference-section .code-header {
        position: absolute;
        top: 0px;
        left: 0px;
        padding-left: 6px;
        width: 100%;
        background: #333;
        border-radius: 8px 8px 0 0;
        font-style: italic;
      }
      /* Responsive - Collapse at 880px */
      @media (max-width: 880px) {
        .sidebar {
          position: relative;
          width: 100%;
          height: auto;
          flex-direction: row;
          align-items: center;
          padding: 1rem 1.5rem;
          border-right: none;
          border-bottom: 1px solid rgba(255, 255, 255, 0.08);
        }
        .reference-section {
          grid-template-columns: 1fr;
        }
        .sidebar-logo {
          padding: 0;
          margin-right: 2rem;
        }

        .sidebar-nav {
          display: flex;
          gap: 0.5rem;
        }

        .sidebar-nav a {
          padding: 0.5rem 1rem;
          border-left: none;
          border-radius: 6px;
        }

        .sidebar-nav a.active {
          border-left: none;
          background: rgba(85, 246, 245, 0.12);
        }
        .sidebar-nav .sub-nav {
          display: none;
        }

        .main {
          margin-left: 0;
          padding: 2rem 1.5rem;
        }
      }
    </style>
  </head>
  <body>
    <aside class="sidebar">
      <a href="index.html" class="sidebar-logo">Veform</a>
      <nav>
        <ul class="sidebar-nav">
          <li id="toggleOverview">
            <a href="#overviewElement" class="nav-header">Overview</a>
            <ul class="sub-nav">
              <li><a href="#overviewWhy">Why</a></li>
              <li><a href="#overviewInstallation">Installation</a></li>
              <li><a href="#overviewArchitecture">Architecture</a></li>
            </ul>
          </li>
          <li id="toggleReference">
            <a href="#referenceElement" class="nav-header">Reference</a>
            <ul class="sub-nav">
              <li><a href="#referenceTypes">Types</a></li>
            </ul>
          </li>
          <li id="toggleExamples">
            <a href="#examplesElement" class="nav-header">Examples</a>
          </li>
        </ul>
      </nav>
    </aside>

    <main class="main">
      <section id="overviewElement" class="section">
        <h2>Overview</h2>
        <div class="section-content">
          <p>
            Speech-to-text, text-to-speech, llm pipelines and managing
            conversation state is a pain (trust us). Veform is here to simplify
            the whole process without forcing you to compromise your vision or
            rework your existing input logic.
          </p>
          <p>
            The value offer here is simple. This is a pain to implement and
            maintain yourself, there are many pitfalls and uncertainties. This
            could either be a months long project across multiple platforms that
            needs to be maintained and updgraded into the future or a few hours
            one time setup with Veform.
          </p>

          <div class="subsection" id="overviewWhy">
            <h2>Why not just do it myself?</h2>
            <ul>
              <li>
                Additional services need to be created. You will need to support
                and maintain websockets or SSE connections.
              </li>
              <li>
                Speech-to-text is simple on the surface, but complex in practice
                and difficult to orchestrate around audio output.
              </li>
              <li>No need to self-host or manage infrastructure for LLMs.</li>
              <li>
                Easily add to iOS, web and Android apps for a unified
                experience, no need to write 3X implementations.
              </li>
            </ul>
            <br />
            <p>
              Conversations are not deterministic or consistent, audio
              input/output is not easy to get reliable and fluid. Let us sink
              deep into the weeds on those topics so you can build focus on your
              users.
            </p>
          </div>
          <div class="subsection" id="overviewInstallation">
            <h2>Installation</h2>
            <p>Download the library lol</p>
          </div>
          <div class="subsection" id="overviewArchitecture">
            <h2>High level architecture</h2>
            <p>
              To make things fully transparent here is what Veform is doing
              under the hood. Each of these pieces seems simple, but is packed
              with complexity to handle and smooth over all the edge cases that
              can occur. Audio input/output, websockets and LLM generated
              replies is a lot of moving pieces to prioritize and organize in a
              way that feels natural for users.
            </p>
            <img
              src="./chart.png"
              alt="High level architecture"
              width="100%"
              max-width="1200px"
            />
          </div>
        </div>
      </section>

      <section id="referenceElement" class="section">
        <h2>Reference</h2>
        <label for="languageSelector">Language</label>
        <select id="languageSelector" class="reference-language">
          <option value="typescript">TypeScript</option>
          <option value="swift">Swift</option>
        </select>
        <div class="section-content">
          <div class="subsection" id="referenceTypes">
            <h2>Functions</h2>
            <div class="reference-section">
              <div>
                <p>
                  <b>Veform constructor</b><br />Instantiates a new veform
                  instance with the API Key. This is used for interactions and
                  control over the conversation. Data input via the conversation
                  is accessible here.<br />
                  <b>Note:</b> Information about the conversation will be lost
                  once this instance is destroyed. You will need to
                  process/store this data yourself before this instance gets
                  discarded. We don't store conversation data.
                </p>
              </div>
              <div class="">
                <span class="code-header">Veform constructor</span>
                <pre class="typescript-code"><code class="language-typescript">
const veform = new Veform(apiKey: string);
                        </code></pre>
                <pre class="swift-code"><code class="language-swift">
let veform = Veform(apiKey: string);
                </code>
                </pre>
              </div>
            </div>
            <div class="reference-section">
              <div>
                <p>
                  <b>OnEvent(event, fieldState)</b><br />Callback function that
                  fires whenever an event occurs internally. This can be
                  leveraged to build any kind of UI you want. Plug into every
                  even to trigger your own responses to <a href="#referenceConversationEvents">ConversationEvents</a>.
                </p>
              </div>
              <div class="">
                <span class="code-header">OnEvent(event, fieldState)</span>
                <pre class="typescript-code"><code class="language-typescript">
veform.onEvent((event: ConversationEvent, fieldState: FieldState) => {
    if (event === ConversationEvent.AUDIO_IN_MESSAGE) {
        document.getElementById(fieldState.id).value = fieldState.answer;
    }
});
                          </code></pre>
                <pre class="swift-code"><code class="language-swift">
veform.onEvent { [weak self] event, fieldState in
    if event == .audioInMessage {
        viewModel.updateField(fieldState.id, fieldState.answer)
    }
};
                  </code>
                  </pre>
              </div>
            </div>
            <div class="reference-section">
              <div>
                <p>
                  <b>onComplete(handler)</b><br />Callback function that is
                  called when the conversation is complete. Returns the final
                  <a href="#referenceConversationState">ConversationState</a>
                  with all fields in a valid state.
                </p>
              </div>
              <div class="typescript-code">
                <span class="code-header">onComplete</span>
                <pre><code class="language-typescript">
veform.onComplete((conversationState) => {
    fetch("/api/submit", {
        method: "POST",
        body: JSON.stringify(conversationState),
    });
});
                    </code></pre>
              </div>
              <div class="swift-code">
                <span class="code-header">onComplete</span>
                <pre><code class="language-swift">
veform.onComplete { [weak self] conversationState in
    print(conversationState)
};
                    </code></pre>
              </div>
            </div>
            <div class="reference-section">
                <div>
                  <p>
                    <b>start(formId)</b><br />Start the given formId. After running this permissions will be requested and the audio conversation will begin.
                  </p>
                </div>
                <div class="typescript-code">
                  <span class="code-header">onComplete</span>
                  <pre><code class="language-typescript">
  veform.start("abcd");
                      </code></pre>
                </div>
                <div class="swift-code">
                  <span class="code-header">onComplete</span>
                  <pre><code class="language-swift">
  veform.start(formId: "abcd")
                      </code></pre>
                </div>
              </div>
            <div class="reference-section">
                <div>
                  <p>
                    <b>listForms()</b><br />Returns a list of all forms you have created.
                  </p>
                </div>
                <div class="typescript-code">
                  <span class="code-header">onComplete</span>
                  <pre><code class="language-typescript">
  veform.listForms().then((forms) => {
      console.log(forms);
  });
                      </code></pre>
                </div>
                <div class="swift-code">
                  <span class="code-header">onComplete</span>
                  <pre><code class="language-swift">
  veform.listForms { [weak self] forms in
      print(forms)
  };
                      </code></pre>
                </div>
              </div>
          </div>
          <div class="subsection" id="referenceTypes">
            <h2>Types</h2>
            <div class="reference-section">
              <div>
                <p>
                  <b>Form</b><br />Returned from <code>/form/:id</code>.
                  Contains data about a form you have created previously.
                </p>
              </div>
              <div>
                <span class="code-header">Form type</span>
                <pre><code class="language-typescript">
type Form = {
    id: string;
    name: string;
    fields: [{
        name: string;
        type: FieldType;
        question: string,
        id: string
    }];
};
                    </code></pre>
              </div>
            </div>
            <div class="reference-section" id="referenceConversationState">
              <div>
                <p>
                  <b>FieldState & ConversationState</b><br />Represents the
                  state of the conversation at any given time. Returned from
                  <code>onComplete</code> when the conversation is completed.
                </p>
              </div>
              <div>
                <span class="code-header">Form type</span>
                <pre><code class="language-typescript">
type FieldState = {
    id: string;
    fieldName: string;
    question: string;
    answer: string | number | null;
    type: FieldType;
    valid: boolean;
}
type ConversationState = FieldState[];
                      </code></pre>
              </div>
            </div>
            <div class="reference-section" id="referenceConversationEvents">
              <div>
                <p>
                  <b>Conversation Events</b><br />Events dispatched as the
                  conversation is progressing.
                </p>
              </div>
              <div>
                <span class="code-header">ConversationEvent enum</span>
                <pre><code class="language-typescript">
enum ConversationEvent: String {
    case audioInChunk
    case audioInMessage
    case audioOutChunk
    case audioOutMessage
    case listening
    case speaking
    case fieldChanged
    case genReplyRequestStart
    case genReplyRequestEnd
    case error
}
                        </code></pre>
              </div>
            </div>
          </div>
        </div>
      </section>



      <section id="examplesElement" class="section">
        <h2>Examples</h2>
        <label for="languageSelector2">Language</label>
        <select id="languageSelector2" class="reference-language">
          <option value="typescript">TypeScript</option>
          <option value="swift">Swift</option>
        </select>
        <section class="subsection">
            <h2>Pure Audio Conversation</h2>
            <div class="typescript-code">
            <pre><code class="language-typescript">
function startConversation() {
    const veform = new Veform("dummy-api-key");
    veform.onComplete((conversationState) => {
        fetch("/submit", {
            method: "POST",
            body: JSON.stringify(conversationState),
        })
    });
    veform.start("abcd");
}
                      </code></pre></div>
                      <div class="swift-code">
            <pre><code class="language-swift">
                let veform = Veform(apiKey: "dummy-api-key");
                veform.onComplete { [weak self] conversationState in
                    print(conversationState)
                };
                veform.start(formId: "abcd")
                      </code></pre></div>
        </section>
        <section class="subsection">
            <h2>Autofill UI while having a conversation</h2>
            <div class="typescript-code">
            <pre><code class="language-typescript">
function startConversation() {
    const veform = new Veform("dummy-api-key");
    veform.onEvent((event, fieldState) => {
        if (event === ConversationEvent.FIELD_CHANGED) {
            if (!fieldState.valid) {
                document.getElementById(fieldState.id).classList.add("error")
            } else {
                document.getElementById(fieldState.id).classList.remove("error")
            }
        }
        if (event === ConversationEvent.AUDIO_IN_MESSAGE) {
            document.getElementById(fieldState.id).value = fieldState.answer;
        }
    });
    veform.onComplete((conversationState) => {
        fetch("/submit", {
            method: "POST",
            body: JSON.stringify(conversationState),
        })
    });
    veform.start("abcd");
}
                      </code></pre></div>
                      <div class="swift-code">
            <pre><code class="language-swift">
                let veform = Veform(apiKey: "dummy-api-key");
                veform.onComplete { [weak self] conversationState in
                    print(conversationState)
                };
                veform.start(formId: "abcd")
                      </code></pre></div>
        </section>
      </section>
    </main>
    <script type="text/javascript">
      const current = window.location.hash;
      const overview = document.getElementById("overviewElement");
      const reference = document.getElementById("referenceElement");
      const examples = document.getElementById("examplesElement");
      const toggleOverview = document.getElementById("toggleOverview");
      const toggleReference = document.getElementById("toggleReference");
      const toggleExamples = document.getElementById("toggleExamples");

      if (current.includes("reference")) {
        reference.classList.add("active");
        toggleReference.classList.add("active");
      } else if (current.includes("examples")) {
        examples.classList.add("active");
      } else {
        overview.classList.add("active");
      }

      toggleOverview.addEventListener("click", () => {
        console.log("SETTING ACTIVE OVER");
        setActiveSection("overview");
      });
      toggleReference.addEventListener("click", () => {
        setActiveSection("reference");
      });
      toggleExamples.addEventListener("click", () => {
        setActiveSection("examples");
      });
      function setActiveSection(name) {
        overview.classList.remove("active");
        reference.classList.remove("active");
        examples.classList.remove("active");
        toggleOverview.classList.remove("active");
        toggleReference.classList.remove("active");
        toggleExamples.classList.remove("active");
        if (name.includes("overview")) {
          overview.classList.add("active");
          toggleOverview.classList.add("active");
        } else if (name.includes("reference")) {
          reference.classList.add("active");
          toggleReference.classList.add("active");
        } else if (name.includes("examples")) {
          examples.classList.add("active");
          toggleExamples.classList.add("active");
        }
      }
      hljs.highlightAll();

      const swiftCode = document.getElementsByClassName("swift-code");
      const typescriptCode = document.getElementsByClassName("typescript-code");
      for (const code of swiftCode) {
        code.style.display = "none";
      }
      const languageSelector = document.getElementById("languageSelector");
      const languageSelector2 = document.getElementById("languageSelector2");
      function setLanguage(event) {
        if (event.target.value === "swift") {
          for (const code of swiftCode) {
            code.style.display = "block";
          }
          for (const code of typescriptCode) {
            code.style.display = "none";
          }
        } else if (event.target.value === "typescript") {
          for (const code of swiftCode) {
            code.style.display = "none";
          }
          for (const code of typescriptCode) {
            code.style.display = "block";
          }
        }
      }
      languageSelector2.addEventListener("change", (event) => {
        setLanguage(event);
      });
      languageSelector.addEventListener("change", (event) => {
        setLanguage(event);
      });
    </script>
  </body>
</html>
